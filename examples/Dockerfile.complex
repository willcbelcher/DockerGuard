FROM debian:bullseye-slim

LABEL maintainer="admin@example.com"

RUN apt-get update && apt-get install -y \
    nginx \
    curl \
    git \
    && rm -rf /var/lib/apt/lists/*

COPY nginx.conf /etc/nginx/nginx.conf
COPY html /usr/share/nginx/html

# Potential issue: running as root by default
# Potential issue: exposing port 80 (privileged)
EXPOSE 80

HEALTHCHECK --interval=30s --timeout=3s \
  CMD curl -f http://localhost/ || exit 1

CMD ["nginx", "-g", "daemon off;"]
